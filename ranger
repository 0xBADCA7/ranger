#!/usr/bin/python
# coding=utf-8

# TODO: cd after exit

from code import debug, fm, defaultui, options, environment

# TODO: find out the real name of this script and include files relative to here

# TODO: Parse arguments

# TODO: load config

def main():
	import locale, os
	os.stat_float_times(True)
	locale.setlocale(locale.LC_ALL, 'en_US.utf8')

	try:
		path = '/srv/music/compilations/'
		opt = options.get()
		env = environment.Environment(opt)

		my_ui = defaultui.DefaultUI(env)
		my_fm = fm.FM(env)
		my_fm.feed(path, my_ui)
		my_fm.run()

	except:
		my_ui.exit()
		raise


if __name__ == "__main__": main()
